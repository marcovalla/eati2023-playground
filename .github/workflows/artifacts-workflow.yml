name: Artifacts in my workflow
on:
 push:
  branches:
   - anotherbranch

jobs:

 build:
  runs-on: ubuntu-latest
  steps:
   - name: "Checkout del repositorio"
     uses: actions/checkout@v3
     with:
      repository: jmoyano/cautious-meme
      ref: main
      
   - name: "Compilando main.c"
     run: gcc ./main.c -o main
    
   - name: "Subiendo el artefacto" 
     uses: actions/upload-artifact@v3 
     with:
      name: envoutput
      path: main
      
 test:
  needs: [ "build" ]
  runs-on: ubuntu-latest
  steps:
   - name: "Checkout del repositorio"
     uses: actions/checkout@v3
     
   - name: "Descargar el artefacto"
     uses: actions/download-artifact@v3
     with:
      name: envoutput
    
   - name: "Ejecutando ls"
     run: ls
    
   - name: "Ejecutar main"
     env:
      RESULTADO
     run: |
      chmod +x ./main
      RE=$(./main)
      echo "::set-output name=RESULTADO::$resultado"
   - name: "Verificando el resultado"
     if: ${{ vars.RESULTADO == 0 }}
     run: echo "Exito"
     if: ${{ vars.RESULTADO == 0 }}
     run: echo "Error"
          
     